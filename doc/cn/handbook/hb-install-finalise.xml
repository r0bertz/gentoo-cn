<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/www/www.gentoo.org/raw_cvs/gentoo/xml/htdocs/doc/en/handbook/hb-install-finalise.xml,v 1.27 2004/05/09 11:07:47 swift Exp $ -->

<sections>
<section>
<title>用户管理</title>
<subsection>
<title>设定超级用户的密码</title>
<body>

<p>
在你忘记之前，输入以下命令设定超级用户密码：
</p>

<pre caption="设定超级用户密码">
# <i>passwd</i>
</pre>

<p>
如果你需要超级用户能够通过串行终端登录，添加<c>tts/0</c>到文件<path>/etc/securetty</path>：
</p>

<pre caption="添加tts/0到/etc/securetty">
# <i>echo "tts/0" &gt;&gt; /etc/securetty</i>
</pre>

</body>
</subsection>
<subsection>
<title>给日常使用添加一个普通用户</title>
<body>

<p>
在一个Unix/Linux系统上以超级用户身份工作是<e>危险的</e>和应该尽量避免的。因此，<e>强烈</e>推荐给日常使用添加一个用户。
</p>

<p>
比如，创建一个属于<c>wheel</c>组（可以通过命令<c>su</c>切换到超级用户）、<c>users</c>组（所有用户的默认组）和<c>audio</c>组（可以使用音频设备）的名为<c>john</c>的用户：
</p>

<pre caption="给日常使用创建一个用户">
# <i>useradd john -m -G users,wheel,audio -s /bin/bash</i>
# <i>passwd john</i>
Password: <comment>（给john设定密码）</comment>
Re-enter password: <comment>（重新输入密码以确认）</comment>
</pre>

<p>
如果一个用户需要以超级用户身份做某项工作，他们可以通过使用<c>su -</c>来暂时获得超级用户权限。另一个方法是使用<c>sudo</c>软件包，如果配置准确，也是很安全的一种方法。
</p>

</body>
</subsection>
</section>
<section>
<title>重启和享受你的新系统</title>
<subsection>
<title>重启</title>
<body>

<p>
祝贺你！你的Gentoo系统已经可以使用。退出chroot的环境，并卸载所有已挂载的分区。然后输入一条你期盼已久的神奇的命令：<c>reboot</c>。
</p>

<pre caption="重启系统">
# <i>exit</i>
# <i>cd /</i>
# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
# <i>reboot</i>
</pre>

<p>
当然，不要忘了卸载启动光盘，否则开机启动仍然进入启动CD，而不是你新的Gentoo系统。
</p>

<p>
OldWorld <b>PPC</b>用户会在MacOS中启动，因为他们的启动程序还没有安装。这些用户应该阅读<uri link="#doc_chap2_sect2">可选：配置BootX</uri>。<b>MIPS</b>用户将需要在他们的MIPS PROM上再做一些工作才能使Gentoo正常运作。这些用户应该阅读<uri link="#doc_chap2_sect3">可选：使Gentoo/MIPS运作</uri>。
</p>

<p>
GRP用户可以从<uri link="#doc_chap2_sect4">可选：安装GRP软件包</uri>继续，其余的可以在<uri link="?part=1&amp;chap=12">下一步做什么？</uri>完成。
</p>

</body>
</subsection>
<subsection>
<title>可选：配置BootX</title>
<body>

<impo>
这个子章节<e>只</e>适用于要使用BootX作为启动程序的<b>PPC</b>用户。其他的用户都应该跳过这一子章节。
</impo>

<p>
现在你的机器是在MacOS上启动，打开BootX控制面板。选择<c>Options</c>，去掉<c>Used specified RAM disk</c>选项的选择。当你回到BootX的主界面时，你现在会发现设定你机器的根磁盘和分区的选项。在这些填入正确的值。
</p>

<p>
BootX可以配置使得在启动时开始运行Linux。如果你这样做，你将会先看到你的机器启动进入MacOS，然后在启动过程中，BootX将会启动和开始运行Linux。查看<uri link="http://penguinppc.org/projects/bootx/">BootX主页</uri>以获得更多相关信息。
</p>

<p>
如果你是一个GRP用户，你可以从<uri link="#doc_chap2_sect4">可选：安装GRP软件包</uri>继续，否则从<uri link="?part=1&amp;chap=12">下一步做什么？</uri>继续。
</p>

</body>
</subsection>
<subsection>
<title>可选：使Gentoo/MIPS运作</title>
<body>

<impo>
这个子章节<e>只</e>适用于<b>MIPS</b>用户！其他的读者应该跳过这个子章节。
</impo>

<p>
重启后，进入<e>System Maintenance Menu</e>并选择<e>Enter Comand Monitor</e>（<c>5</c>）。如果你要测试你新装的Gentoo安装，你可以就运行<c>boot -f &lt;kernel name&gt;</c>。要使得系统永久从Gentoo启动，你需要在MIPS PROM中设定一些变量：
</p>

<pre caption="配置PROM启动Gentoo">
1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option? <i>5</i>
Command Monitor.  Type "exit" to return to the menu.

<comment>(&lt;root device&gt; = Gentoo's root partition, e.g. /dev/sda3)</comment>
&gt;&gt; <i>setenv OSLoadPartition &lt;root device&gt;</i>

<comment>(输入ls列出已有的内核)</comment>
&gt;&gt; <i>setenv OSLoader &lt;kernel name&gt;</i>
&gt;&gt; <i>setenv OSLoadFilename &lt;kernel name&gt;</i>

<comment>(声明你要传递给内核的参数)</comment>
&gt;&gt; <i>setenv OSLoadOptions &lt;kernel parameters&gt;</i>

<comment>(提供Volume头文件的位置)</comment>
&gt;&gt; <i>setenv SystemPartition scsi(0)disk(1)rdisk(0)partition(8)</i>

<comment>(自动启动Gentoo)</comment>
&gt;&gt; <i>setenv AutoLoad Yes</i>

<comment>(设定时区)</comment>
&gt;&gt; <i>setenv TimeZone EST5EDT</i>

<comment>(使用串行终端，有图形适配器的用户应该用“g”来代替“d1”（one）)</comment>
&gt;&gt; <i>setenv console d1</i>
</pre>

<p>
现在你可以享受你的Gentoo了！
</p>

</body>
</subsection>
<subsection>
<title>可选：安装GRP软件包</title>
<body>

<impo>
这部分只适用于GRP用户。其他的用户应该跳过这一部分，从<uri link="?part=1&amp;chap=12">下一步做什么？</uri>继续。
</impo>

<p>
系统启动后，以你新建的用户登录（比如，<c>john</c>）并使用<c>su -</c>获得超级用户权限：
</p>

<pre caption="获得超级用户权限">
$ <i>su -</i>
Password: <comment>（输入超级用户密码）</comment>
</pre>

<p>
现在我们需要改变Portage的配置，让它去从第二张CD（Gentoo软件包CD）选找预编译的工具。首先挂载这个CD：
</p>

<pre caption="挂载软件包CD">
<comment>（把Gentoo软件包CD插入CD驱动器）</comment>
# <i>mount /mnt/cdrom</i>
</pre>

<p>
现在配置Portage使用<path>/mnt/cdrom</path>来寻找预编译包：
</p>

<pre caption="配置Portage来使用/mnt/cdrom">
# <i>ls /mnt/cdrom</i>

<comment>（如果有一个/mnt/cdrom/packages文件夹：）</comment>
# <i>export PKGDIR="/mnt/cdrom/packages"</i>

<comment>（否则：）</comment>
# <i>export PKGDIR="/mnt/cdrom"</i>
</pre>

<p>
现在安装你所需要的软件包。软件包包含了一些预编译的包，如KDE：
</p>

<pre caption="安装KDE">
# <i>USE="bindist" emerge --usepkg kde</i>
</pre>

<p>
安装XFree（不管是直接安装还是依赖性安装）<c>USE="bindist"</c>是必须的。这可以防止下载微软的核心字体（这些是不可以在我们的LiveCD中发行的）。
</p>

<p>
确认你现在要安装二进制文件。当你做完一次<c>emerge sync</c>更新Portage（这个你以后会学到）后，预编译的包可能和更新后的Portage里的ebuilds不符。你可以使用<c>emerge --usepkgonly</c>代替<c>emerge --usepkg</c>来避开这个。
</p>

<p>
祝贺你，你的系统已经完全装备好了。从<uri link="?part=1&amp;chap=12">下一步做什么？</uri>继续学习更多Gentoo相关知识。
</p>

</body>
</subsection>
</section>
</sections>
