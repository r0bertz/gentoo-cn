<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet type="text/xsl" href="/xsl/guide.xsl" ?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/www/www.gentoo.org/raw_cvs/gentoo/xml/htdocs/doc/en/handbook/hb-working-othertools.xml,v 1.5 2004/03/01 05:43:42 swift Exp $ -->

<sections>
<section>
<title>Gentoolkit</title>
<subsection>
<title>简介</title>
<body>

<p>
The <c>gentoolkit</c> package is a collection of unofficial yet very handy
administration scripts for Gentoo. The collection contains the following tools:
</p>

<ul>
  <li><c>qpkg</c> to ease querying the package database</li>
  <li>
    <c>dep-clean</c> to manage orphaned packages or non-existing dependencies
  </li>
  <li>
    <c>revdep-rebuild</c> rebuilds dependencies in case a global change has been
    made
  </li>
  <li>
    <c>etcat</c> provides much more information about the package, including
    a description about the used USE-flags, dependencies, etc.
  </li>
  <li><c>euse</c> to manage your USE-flag settings</li>
</ul>

<p>
Most of these tools have a nice manual page; please use it to understand the
full potential of the tool. In the next sections we will briefly discuss some of
the features of the tools.
</p>

<p>
To install <c>gentoolkit</c>, simply emerge it:
</p>

<pre caption="Installing gentoolkit">
# <i>emerge gentoolkit</i>
</pre>

</body>
</subsection>
<subsection>
<title>qpkg - Query Packages</title>
<body>

<p>
<c>qpkg</c> has many query features. You can search for the package that owns a
certain file, list the content of a package, verify the files owned by that
package, list the installed packages depending on a given package and more.
</p>

<p>
Let us give you a couple of examples. First, we search for the package that owns
the file <path>/usr/lib/libbonobo-2.so</path>.
</p>

<pre caption="Searching for a package that owns a certain file">
$ <i>qpkg --find-file /usr/lib/libbonobo-2.so</i>
gnome-base/libbonobo *
</pre>

<p>
Now that we know the owner, let us take a look at the files the package
provides:
</p>

<pre caption="Viewing the contents of a package">
$ <i>qpkg --list libbonobo</i>
gnome-base/libbonoboui-2.4.0 *
CONTENTS:
/var
/var/lib
/usr
/usr/lib
/usr/lib/libbonoboui-2.so.0.0.0
/usr/lib/libbonoboui-2.so.0 -> libbonoboui-2.so.0.0.0
/usr/lib/libbonoboui-2.so -> libbonoboui-2.so.0.0.0
<comment>(Remaining output removed to improve readability)</comment>
</pre>

<p>
To verify the files provided by the <c>libbonobo</c> package (i.e. check the
modification time and checksums) we use the <c>--check</c> argument:
</p>

<pre caption="Verify the libbonobo package">
# <i>qpkg --check libbonobo</i>
gnome-base/libbonobo-2.4.0 *
0/402
</pre>

<p>
In the previous example, <c>libbonobo</c> has 402 files of which none have been
changed since the installation. Now let us take a look at what installed
packages depend on <c>libbonobo</c>:
</p>

<pre caption="Checking the dependencies">
$ <i>qpkg --query-deps libbonobo</i>
gnome-base/libbonobo-2.4.0 *
DEPENDED ON BY:
        gedit-2.4.0
        gnome-panel-2.4.0-r1
        gnome-vfs-2.4.0
        libbonoboui-2.4.0
        libgnome-2.4.0
        libgnomeprint-1.116.1
        libgnomeui-2.4.0.1
        at-spi-1.1.8
        bug-buddy-2.4.0
        gnome-media-2.4.0
        gnome-utils-2.4.0
        libgsf-1.8.2
        yelp-2.4.0
        eog-2.4.0
        evolution-1.4.5
        gnome-cups-manager-0.17
        epiphany-1.0
</pre>

<p>
More information on <c>qpkg</c> is available in the man page:
</p>

<pre caption="Viewing qpkg's man page">
$ <i>man qpkg</i>
</pre>

</body>
</subsection>
<subsection>
<title>dep-clean</title>
<body>

<p>
With <c>dep-clean</c> you can view the dependencies that aren't
right. By default, <c>dep-clean</c> shows you:
</p>

<ul>
  <li>(in red): missing dependencies</li>
  <li>(in yellow): installed packages that have been removed from Portage</li>
  <li>
    (in green): installed packages that you haven't installed manually and
    that aren't depended on by other packages
  </li>
</ul>

<pre caption="Running dep-clean">
$ <i>dep-clean</i>
</pre>

<p>
More information on <c>dep-clean</c> can be found in the man page:
</p>

<pre caption="Viewing the dep-clean man page">
$ <i>man dep-clean</i>
</pre>

</body>
</subsection>
<subsection>
<title>revdep-rebuild</title>
<body>

<p>
With <c>revdep-rebuild</c> you can rebuild packages that broke when you updated
a library that had incompatible ABIs with its previous version. 
</p>

<p>
<brite>TODO: Add more information -- I don't know anything about this.</brite>
</p>

</body>
</subsection>
<subsection>
<title>etcat - Gentoo Portage Information Extractor</title>
<body>

<p>
<c>etcat</c> enables users and developers to quickly find out information on
particular packages without resorting to manually poking the portage tree and
portage database. With <c>etcat</c> you can - amongst other things - list the
USE flags a package uses, view the <path>ChangeLog</path> entries, calculate the
diskspace a package uses, etc.
</p>

<p>
If we use <c>libbonobo</c> once again as example, we can find out the used
USE-flags with the <c>uses</c> option:
</p>

<pre caption="Display the used USE-flags">
$ <i>etcat uses libbonobo</i>

</pre>

<p>
To view the <path>ChangeLog</path> entries you should use the <c>changes</c>
option:
</p>

<pre caption="Display ChangeLog information">
$ <i>etcat changes libbonobo</i>

</pre>

<p>
To calculate the total amount of diskspace <c>libbonobo</c> takes we can use
<c>size</c>:
</p>

<pre caption="Calculate the total amount of diskspace">
$ <i>etcat size libbonobo</i>

</pre>

<p>
For more information regarding <c>etcat</c> please consult the man page.
</p>

<pre caption="Viewing etcat's man page">
$ <i>man etcat</i>
</pre>

</body>
</subsection>
<subsection>
<title>euse - Gentoo Command Linux USE-flag Editor</title>
<body>

<p>
With <c>euse</c> you can edit your USE variable in <path>/etc/make.conf</path>.
<c>euse</c> will inform you with what each USE-flag means so you can make
well-informed decisions. We start with displaying the information on the
USE-flags:
</p>

<pre caption="Displaying USE-flag information">
$ <i>euse --info</i>
<comment>(...)</comment>
justify            [-] [ ] [L] [app-editors/nano] : Toggle the justify option
                               ... god i hate that thing :)
jython             [-] [ ] [L] [dev-java/ant] : Enable Jython support.
kakasi             [-] [ ] [L] [app-text/namazu] : Enable kakasi support for
                               namazu
kde                [+] [D] [G] Adds support for kde-base/kde (K Desktop
                               Enviroment)
kerberos           [-] [ ] [G] Adds kerberos support
<comment>(...)</comment>

$ <i>euse --info gnome</i>
gnome [+] [D] [G] Adds GNOME support
</pre>

<p>
The output informs you about the USE-flag name, if it is enabled (+) or 
disabled (-), where it is enabled/disabled (C for <path>make.conf</path>, D for <path>make.defaults</path> and E for environment), whether it is a global one 
(G) or local to a specific ebuild (L) and a description.
</p>

<p>
To enable or disable a USE-flag in <path>make.conf</path>, you can use
<c>--enable</c> and <c>--disable</c>:
</p>

<pre caption="Disabling gnome support in /etc/make.conf">
# <i>euse --disable gnome</i>
</pre>

<p>
More information about <c>euse</c> can be found in the man page.
</p>

<pre caption="Displaying the man page">
$ <i>man euse</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>epm - RPM Workalike for Gentoo</title>
<subsection>
<title>Introduction</title>
<body>

<p>
Some people are used to working with <c>rpm</c>, RedHat's Package Manager. To
facilitate working on Gentoo we provide an rpm-workalike called <c>epm</c>.
Although not all RPM-functionality is reached yet, you should be able to do most
tasks with <c>epm</c>.
</p>

</body>
</subsection>
<subsection>
<title>Querying Packages</title>
<body>

</body>
</subsection>
<subsection>
<title>Managing Software</title>
<body>

</body>
</subsection>
<subsection>
<title>Other Features</title>
<body>

</body>
</subsection>
</section>
</sections>
