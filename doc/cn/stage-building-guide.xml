<?xml version='1.0' encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/xsl/guide.xsl" ?>

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/zh_cn/stage-building-guide.xml">

<author title = "Author"><mail link = "zhen@gentoo.org">John P. Davis</mail></author>

<author title = "Author"><mail link = "avenj@gentoo.org">Jon Portnoy</mail></author>

<author title = "Editor"><mail link = "peesh@gentoo.org">Jorge Paulo</mail></author>

<author title="Translator"><mail link="liqiang@iscas.cn">Zhang Liqiang</mail></author>

<license/>

<version>1.1</version>
<date>2003年1月15日</date>

<abstract>这是一个描述如何建造 Gentoo Linux stage 的指南。
</abstract>

<chapter>
<title>开场白</title>
<section>
<title>介绍</title>
<body>

<p>
本指南描述如何使用我们的stage 建造应用－－stager，为 Gentoo Linux 建造新的 stage。
</p>

</body>
</section>
<section>
<title>取得源码</title>
<body>

<p>
在建造任何东西之前，首先要得到必须的源码工具等。
开始之前确保你已经从 CVS 取得了 <i>gentoo-src</i> 模块，并且是最新的。
建造脚本更改频繁，所以确保你拥有当前的版本。
如果你无法访问 gentoo-src 模块，可以在这里找到快照
<uri>http://dev.gentoo.org/~avenj/stager/</uri>.
另外，需要最新的 stage1 压缩包（tarball）。
这一般可以在 Gentoo 镜像中的 <path>experimental/x86/stages</path> 找到。你要找的压缩包是 
<i>stage1-x86-1.4_pre<i>日期</i></i>.tar.bz2，其中 <i>日期</i> 是可能的最近日期。
</p>
</body>
</section>
</chapter>

<chapter>
<title>建造过程</title>
<section>
<title>第一步</title>

<body>
<p>
首现在一个相当大的分区创建一个目录来储存所有的建造文件。下来，把 <path>stager</path>
目录从 <i>gentoo-src</i> 复制到这个新目录（在本文档中将会被参照为 
<path>/usr/src/build</path> ）。
还可以，解开快照的压缩包到这个目录。
最后，在目录 <path>/usr/src/build</path> 中建立叫做 <i>stages</i> 的目录，
并把 experimental stage1 压缩包放进去。
</p>

<pre caption="准备">
# <c>mkdir /usr/src/build </c>
<codenote>你可以任意改变上面的目录。</codenote>

# <c>cp -R /gentoo-src/stager/ /usr/src/build</c>
# <c>cd /usr/src/build/stager ; mkdir stages</c>
# <c>mv stage1-x86-1.4_preDATE.tar.bz2 /usr/src/build/stager/stages</c>

</pre>

</body>
</section>

<section>
<title>建造</title>
<body>

<p>
首先，我们使用通用的优化建造一个 stage2 压缩包。This tarball
这个压缩包将会用来建造一个新的 stages，包括新的 stage1。
</p>

<pre caption="建造 stage2">
# <c>./stager x86 2 orig dest</c>
<codenote>上边，orig 参考 experimental 压缩包中的日期。</codenote>
<codenote>Dest 参考新压缩包的日期。适当的替换这个。</codenote>		
</pre>

<p>
当这个建造结束时，你应当已经有了一个新的 stage2 压缩包，
从 <path>stages</path> 目录中原始的stage1 压缩包而来。
现在你可以用同样的方法从你的 stage2 建造新的 stage1 ：
</p>

<pre caption="建造新的 stage1">
# <c>./stager x86 1 dest dest</c>
</pre>

<p>
Tada - 你已经建立一个新的 stage1 ，从你原始的 stage1 和新的 stage2 而来。
现在你可以建造为指定 CPU 优化的，非通用的压缩包。
注意，这些优化的压缩包 <i>不能</i> 用于建造其他的 stage。
只有通用的压缩包 可以用于建造其他压缩包。
建造其他子类型的压缩包方法一样，只要把 x86 替换为特定的类型即可
若要得到子类型的清单，可以无参数的执行 stager 。
</p>
</body>
</section>

</chapter>

<chapter>
<title>最后注意</title>
<section>
<title>联系</title>
<body>
	
<table>
<tr>
<th>联系</th>
<th>职责</th>
</tr>
<tr>
<ti><mail link="avenj@gentoo.org">Jon Portnoy</mail></ti>
<ti>Gentoo Linux 发行管理员</ti>
</tr>
<tr>
<ti><mail link="jhhudso@gentoo.org">Jared Hudson</mail></ti>
<ti>发行质量保证</ti>
</tr>
<tr>
<ti><mail link="zhen@gentoo.org">John Davis</mail></ti>
<ti>著者</ti>
</tr>
<tr>
<ti><mail link="avenj@gentoo.org">Jon Portnoy</mail></ti>
<ti>著者</ti>
</tr>
</table>
	
</body>
</section>
</chapter>
</guide>
			
		

		
