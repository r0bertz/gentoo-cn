<?xml version = '1.0' encoding = 'UTF-8'?>
<?xml-stylesheet type="text/xsl" href="/xsl/guide.xsl" ?>
<!-- $Header: /var/www/www.gentoo.org/raw_cvs/gentoo/xml/htdocs/doc/en/qmail-howto.xml,v 1.22 2004/05/27 02:17:02 vapier Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/zh_cn/qmail-howto.xml">

<title>qmail/vpopmail 虚拟邮件服务器系统配置指南</title>

<author title="Author">
  <mail link="vapier@gentoo.org">Mike Frysinger</mail>
</author>
<author title="Translator">
  <mail link="dragonnapalm@163.com">dragonnapalm</mail>
</author>

<abstract>
本文档详细描述了如何在qmail, vpopmail, courier-imap, mysql和horde's imp的基础上
创建一个邮件服务器系统.
</abstract>

<version>1.6</version>
<date>May 26, 2004</date>

<chapter>
<title>序言</title>
<section>
<body>

<p>
不论你是为系统后台程序、单一的服务器或域名地址，还是为多个虚拟域名进行电子邮件派发传递，
qmail都可以通过简单的设置满足你的需求。本指南将在着重说明远程访问和加密传输的基础上指导你
完成上面所说的所有工作。
</p>

<p>
本指南将帮助你使用qmail,courier-imap, vpopmail和horde/imp。而这些内容也将涉及到
daemontools, ucspi-tcp, mysql, apache和mod_php。在相关核心组件中，qmail提供了核心mta功能，
courier-imap提供了远程邮箱IMAP访问服务，vpopmail提供了虚拟域名管理，horde/imp则提供了webmail访问。
</p>

<p>
在emerge相关软件包之前，你需要激活以下的USE变量。如果你已经emerge了上述软件包中的任何一个，
你也许需要再次emerge它们。<c>USE="maildir ssl imap mysql"</c>。另外，如果为你的webmail使用
horde/imp，你需要在emerge mod_php之前使用<c>USE="nls"</c> 
</p>

<note>
本指南为分步骤进行，不论什么时候只要你认为完成了设置，你都可以不必再继续。
</note>

<p>
在课程的最后一步，你只需把所有的工作交给qmail来完成。当然，你可以使用许多其他的软件包来
构建你的e-mail服务器系统。现在你该决定qmail是否适合你了，我们还为你准备了另外一个围绕
<uri link="http://www.postfix.org/">Postfix</uri>进行的<uri link="virt-mail-howto.xml">有趣的指南</uri>
 ，或者你也可以研究一下<uri link="http://www.exim.org/">exim</uri>。对于你来说，
你应该为你自己选择一个最佳的解决方案；而对于我们来说，则是为你展示如何使用qmail。
</p>

</body>
</section>
</chapter>

<chapter>
<title>qmail (面向本地)</title>
<section>
<body>

<pre caption="Emerge qmail">
# <i>emerge qmail</i>
</pre>

<impo>
本指南是围绕qmail-1.03-r13 或更新的版本来进行讲解的。它对于以前的版本同样适用吗？
也许吧。你应该升级一下你的qmail吗？是的――只要你确信这个指南能够正确指引你。
</impo>

<warn>
如果你遇到了<c>the virtual/mta package conflicts with another package</c>这样一条提示，
你便需要unemerge系统上其他的MTA。要知道是哪些软件包导致了冲突，请运行<c>emerge qmail -p</c>。
</warn>

<p>
Emerge qmail的同时也会emerge ucspi-tcp和daemontools。如果愿意的话你可以研究一下
<uri link="http://cr.yp.to/ucspi-tcp.html">ucspi-tcp</uri>和<uri 
link="http://cr.yp.to/daemontools.html">daemontools</uri>。daemontools主要负责
将qmail作为服务来管理，而ucspi-tcp则负责管理引入到qmail服务上的的TCP连接。
</p>

<p>
首先我们来做一些安装后的相关设置。
</p>

<pre caption="qmail的快速设置">
<comment>(自定义你的个人信息)</comment>
# <i>nano /var/qmail/control/servercert.cnf</i>
# <i>ebuild /var/db/pkg/net-mail/qmail-1.03-r*/qmail-1.03-r*.ebuild config</i>
</pre>

<p>
qmail的设计在很大程度上注重其安全性，因此它不会给root账号发送任何邮件。因此现在你需要
在你的系统上指定一个可以代替root的帐号来接收邮件。在这篇指南中，我将使用'vapier'用户
来进行相关的设置说明。
</p>

<pre caption="设置非root账号">
# <i>cd /var/qmail/alias</i>
# <i>echo vapier > .qmail-root</i>
# <i>echo vapier > .qmail-postmaster</i>
# <i>echo vapier > .qmail-mailer-daemon</i>
</pre>

<p>
现在启动并运行qmail邮件派发服务。
</p>

<pre caption="启动qmail邮件派发服务">
# <i>rc-update add svscan default</i>
# <i>/etc/init.d/svscan start</i>
# <i>cd /service</i>
# <i>ln -s /var/qmail/supervise/qmail-send qmail-send</i>
</pre>

<p>
我们想知道qmail是否可以正常工作，下面来对它进行快速测试。
</p>

<pre caption="测试邮件派发服务">
# <i>ssh vapier@localhost</i>
# <i>maildirmake .maildir</i>
# <i>qmail-inject root &lt;&lt; EOF
test root e-mail!
EOF</i>
# <i>qmail-inject postmaster &lt;&lt; EOF
test postmaster e-mail!
EOF</i>
# <i>qmail-inject vapier &lt;&lt; EOF
test vapier e-mail!
EOF</i>
# <i>mutt</i> 
<comment>(在收件箱中你应该有3封电子邮件)</comment>
</pre>

<p>
完成了！现在你拥有了一个可以处理本地计算机或者系统后台程序/用户有关邮件发送请求任务的邮件系统。
</p>

<warn>
如果你没有收到邮件或者在日志文件中(查看 <path>/var/log/qmail/</path>)看到有关
'localhost.localhost'奇怪的错误信息，这说明你的域名或dns没有设置好。在默认情况下，
qmail会利用<c>hostname --fqdn</c>的输出信息。如果在你的机器上这条命令输出的是
'localhost'，那么请检查<path>/etc/hostname</path>, <path>/etc/hosts</path>,
你的dns三者是否都已经设置好。完成这项工作后，编辑 <path>/var/qmail/control/</path>
下面的配置文件。如果你需要更多的帮助，请参考下面的样例文件。
</warn>

<pre caption="/var/qmail/control/ 下的二级域名设置样例文件">
# <i>hostname --fqdn</i>
wh0rd.org
# <i>cat me</i>
wh0rd.org
# <i>cat defaultdomain</i>
wh0rd.org
# <i>cat plusdomain</i>
wh0rd.org
# <i>cat locals</i>
wh0rd.org
# <i>cat rcpthosts</i>
wh0rd.org
</pre>

<pre caption=" /var/qmail/control/ 下的三级域名设置样例文件">
# <i>hostname --fqdn</i>
mail.wh0rd.org
# <i>cat me</i>
mail.wh0rd.org
# <i>cat defaultdomain</i>
wh0rd.org
# <i>cat plusdomain</i>
wh0rd.org
# <i>cat locals</i>
mail.wh0rd.org
# <i>cat rcpthosts</i>
mail.wh0rd.org
</pre>

</body>
</section>
</chapter>

<chapter>
<title>vpopmail</title>
<section>
<body>

<pre caption="Emerge vpopmail">
# <i>emerge vpopmail</i>
</pre>

<impo>
本指南是围绕vpopmail-5.4.0_rc1 或更新的版本来进行讲解的。它对于以前的版本同样适用吗？
也许吧。你应该升级一下你的vpopmail吗？是的――只要你确信这个指南能够正确指引你。
</impo>

<p>
vpopmail相对qmail来说需要多花一点时间来进行设置。由于vpopmail需要mysql才能运行，
因此我们首先要启动并运行mysql，然后我们便可以设置vpopmail数据库并进行后面的步骤。
在做这一步之前，你应该确保mysql已经进行了正确的emerge和相关设置。请注意，我对vpopmail设置
的口令是'vpoppw'，当然你应该选择一个不同的口令。。
</p>

<pre caption="在mysql中设置vpopmail">
# <i>rc-update add mysql default</i>
<comment>如果你是第一次emerged mysql, 请在启动mysql服务器之前务必运行
 <i>ebuild &lt;mysql.ebuild&gt; config</i>命令并且根据提示完成相应的步骤.</comment>
# <i>/etc/init.d/mysql start</i>
# <i>nano /etc/vpopmail.conf</i> 
<comment>(修改口令：将'secret'更改为'vpoppw')</comment>
# <i>mysql -p &lt;&lt; EOF
create database vpopmail;
use mysql;
grant select, insert, update, delete, create, drop on vpopmail.* to vpopmail@localhost identified by 'vpoppw';
flush privileges;
EOF</i>
<comment>(下面的命令也许是不需要的，但是为了保险起见我们还是运行一下)</comment>
# <i>chown root:vpopmail /etc/vpopmail.conf</i>
# <i>chmod 640 /etc/vpopmail.conf</i>
# <i>chown root:vpopmail /var/vpopmail/bin/vchkpw</i>
# <i>chmod 4711 /var/vpopmail/bin/vchkpw</i>
</pre>

<warn>
如果你遇到了有关mysql/vpopmail的权限问题，你可能需要重新启动你的mysql。完成这一工作只需要运行
<c>/etc/init.d/mysql restart</c>。
</warn>

<p>
现在，vpopmail可以运行了。在这篇指南中，我们将为"wh0rd.org"域名建立虚拟主机。
这就是说，我们需要在vpopmail中指定虚拟主机所对应的域名。与此同时，我们也将快速添加一个名为
'vapier' 的帐号。
</p>

<pre caption="添加域名">
# <i>source /etc/profile</i>
<comment>(只有当你运行下面的<i>vadddomain</i> 得到"command not found"的时候你才有必要执行这个步骤)</comment>
# <i>vadddomain wh0rd.org postpass</i>
<comment>(现在快速检查一下域名是否设置正确)</comment>
# <i>printf "postmaster@wh0rd.org\0postpass\0blah\0" | vchkpw `which id` 3&lt;&amp;0</i>
uid=89(vpopmail) gid=89(vpopmail) groups=0(root)
<comment>(如果你没有得到类似上面的内容, 则可能是权限设置不当)</comment>
# <i>vadduser vapier@wh0rd.org vappw</i>
</pre>

<p>
每在vpopmail中创建一个域名都将生成一个名为'postmaster'的帐号。在这里我们为postmaster
账号设置的口令是'postpass'。在vpopmail能够完全正常工作之前，我们需要通过courier来接收邮件、
通过qmail和SMTP来发送邮件。
</p>

</body>
</section>
</chapter>

<chapter>
<title>Courier POP/IMAP</title>
<section>
<body>

<pre caption="Emerge courier-imap">
# <i>emerge net-mail/courier-imap</i>
</pre>

<impo>
你必须在emerge vpopmail之后emerge courier-imap，这样authvchkpw模块就将被创建。
</impo>

<impo>
本指南是围绕net-mail/courier-imap-2.1.2-r1或更新的版本来进行讲解的。它对于以前的版本同样适用吗？
也许吧。你应该升级一下你的qmail吗？是的――只要你确信这个指南能够正确指引你。
</impo>

<p>
现在进行一些基本的安装后的设置。只有当你准备使用SSL加密通信（你应该使用它！）的时候
这些步骤才是必要的，否则，请直接跳到下面命令列表中每项设置的的最后两步，并且去掉init
脚本中的'-ssl'后缀。
</p>

<pre caption="POP3/SSL的快速设置">
# <i>cd /etc/courier-imap</i>
# <i>nano authdaemonrc</i>
<comment>(设置authmodulelist变量使其只包含"authvchkpw")</comment>
# <i>nano pop3d.cnf</i> 
<comment>(编辑 [ req_dn ] 段落)</comment>
# <i>mkpop3dcert</i>
# <i>rc-update add courier-pop3d-ssl default</i>
# <i>/etc/init.d/courier-pop3d-ssl start</i>
</pre>

<pre caption="IMAP/SSL的快速设置">
# <i>cd /etc/courier-imap</i>
# <i>nano imapd.cnf</i> 
<comment>(编辑 [ req_dn ] 段落)</comment>
# <i>mkimapdcert</i>
# <i>rc-update add courier-imapd-ssl default</i>
# <i>/etc/init.d/courier-imapd-ssl start</i>
</pre>

<p>
现在你的邮件客户端应该可以登录到主机上收发邮件了。对于我来说，我可以用账号'vapier@wh0rd.org'
以及口令'vappw'进行登陆。
</p>

</body>
</section>
</chapter>

<chapter>
<title>qmail (面向外界)</title>
<section>
<body>

<p>
现在开始启动并运行SMTP，同时确认一下我们没有为垃圾邮件制造另一个漏洞。
</p>

<pre caption="启动 qmail SMTP 服务">
# <i>cd /var/qmail/control/</i>
# <i>nano conf-smtpd</i>
<comment>(去掉SMTP-AUTH 变量并且将 QMAIL_SMTP_CHECKPASSWORD 设置到 /var/vpopmail/bin/vchkpw 上)</comment>
# <i>nano servercert.cnf</i> 
<comment>(编辑[ req_dn ] 段落)</comment>
# <i>mkservercert</i>
# <i>cd /service</i>
# <i>ln -s /var/qmail/supervise/qmail-smtpd qmail-smtpd</i>
# <i>/etc/init.d/svscan restart</i>
</pre>

<p>
如果你还没有对qmail的配置文件进行调整，qmail将接受所有来自wh0rd.org虚拟域名和本地计算机用户
的邮件。此外，qmail只为那些通过127.0.0.1发送邮件的用户以及通过了vpopmail身份验证的用户
处理邮件发送请求。因此在使用邮件客户端发送邮件时，请务必选择类似“服务器需要身份验证”的选项。
对于我来说，我使用用户名'vapier@wh0rd.org'和口令'vappw'进行登录。最后，你还需要设置邮件客户端
为SMTP打开SSL/TLS选项，否则你将无法通过qmail的身份认证。
</p>

</body>
</section>
</chapter>

<chapter>
<title>Horde / IMP Webmail Client</title>
<section>
<body>

<p>
虽然现在有相当多的webmail客户端（而且你可以免费使用它们），但我更偏向于使用由Horde
框架构成的<uri link="http://www.horde.org/imp/">IMP Webmail Client</uri>。
其中最主要的理由是Horde可以为你提供方便的Webmail访问，并且你可以通过添加插件来处理
诸如地址簿、日历、计划任务等工作。如果这些都不足以吸引你，那么也许你可以访问一下
 <uri link="http://www.horde.org/">Horde的官方网站</uri>。
</p>

<p>
好了! 现在，我们需要emerge IMP.
</p>

<pre caption="Emerge IMP">
# <i>emerge horde-imp</i>
</pre>

<impo>
本指南是围绕horde-2.2.4和horde-imp-3.2.2进行讲解的。CVS版本（也就是即将发布的下一个新版本）
可能在相关配置设置上有较大的不同。
</impo>

<p>
除非你已经很清楚的知道Horde该如何设置，否则初次配置Horde并不是那么容易。幸运的是，我知道
该如何去做，因此你可以轻松的完成这项工作。
</p>

<pre caption="Horde的快速设置">
# <i>cd /var/www/localhost/htdocs/horde/config/</i>
# <i>for f in *.dist ; do mv ${f} ${f/.dist} ; done</i>
# <i>nano horde.php</i>
<comment>(在 'Horde Authentication'段落:)</comment>
$conf['auth']['driver'] = 'imap';
$conf['auth']['params']['dsn'] = '{localhost:993/imap/ssl}';

<comment>(在 'Horde Logging'段落:)</comment>
$conf['log']['name'] = '/var/log/apache2/horde.log';

<comment>(在 'Problem Reporting'段落:)</comment>
$conf['problems']['enabled'] = true;
$conf['problems']['email'] = 'webmaster@wh0rd.org';

# <i>nano registry.php</i>
<comment>(在 'Handlers'段落:)</comment>
$this->registry['auth']['login'] = 'imp';
$this->registry['auth']['logout'] = 'imp';

<comment>(在 'Application registry'段落:)
将['imp'] 中的 'status' 从 'inactive' 更改为 'active'</comment>

# <i>touch /var/log/apache2/horde.log</i>
# <i>chown apache:apache /var/log/apache2/horde.log</i>
</pre>

<note>
由于某种原因也许你想更改'webmaster'的e-mail账号，如果是这样的话，你需要通过vpopmail来添加这个用户
（或者参看下面有关qmailadmin的叙述）。
</note>

<p>
现在开始设置IMP。
</p>

<pre caption="IMP的快速设置">
# <i>cd /var/www/localhost/htdocs/horde/imp/config/</i>
# <i>for f in *.dist ; do mv ${f} ${f/.dist} ; done</i>
# <i>nano servers.php</i>

<comment>(编辑 $servers['imap'] 阵列:)</comment>
$servers['imap'] = array(
	'name' => 'wh0rd.org',
	'server' => 'localhost',
	'protocol' => 'imap/ssl/novalidate-cert',
	'port' => 993,
	'folders' => '',
	'namespace' => 'INBOX',
	'maildomain' => 'wh0rd.org',
	'smtphost' => 'localhost',
	'realm' => '',
	'preferred' => ''
);
</pre>

<p>
最后，启动Apache，开始使用webmail。
</p>

<pre caption="运行apache">
# <i>nano /etc/conf.d/apache2</i> 
<comment>(取消 APACHE2_OPTS="-D SSL -D PHP4" 注释)</comment>
# <i>rc-update add apache2 default</i>
# <i>/etc/init.d/apache2 start</i>
</pre>

<warn>
你也许应该考虑一下强制horde用户通过https进行连接。这虽然算不上什么重要的问题，
但为了安全因素你最好对此进行设置。
</warn>

<p>
要测试你的IMP设置，启动Web浏览器然后访问<uri>http://localhost/horde/</uri>
（或者将localhost换成你正在进行设置的服务器）。你应该可以看见一个欢迎页面并且你可以从这个页面登陆
Horde。对于我的设置来说，我只需要使用'vapier@wh0rd.org' 和 'vappw' 作为用户名和口令就可以进行登录了。
</p>

<p>
现在，Hoede和IMP都已经设置好了。但也许你应该回头看看你的配置文件目录并且按照你所需要的
进行优化。
</p>

</body>
</section>
</chapter>

<chapter>
<title>额外的软件包</title>
<section>
<title>qmailadmin</title>
<body>

<p>
我首先推荐的软件包是<uri 
link="http://www.inter7.com/qmailadmin.html">qmailadmin</uri>.  
它是一个用于管理虚拟域名的基于web的管理界面。你只需要简单的<c>emerge 
net-mail/qmailadmin</c> 然后在你的web浏览器中打开<uri>http://localhost/cgi-bin/qmailadmin</uri>
就可以开始使用它了。这个软件会使你的工作变得格外轻松。
</p>

</body>
</section>
<section>
<title>qmHandle</title>
<body>

<p>
如果你在处理qmail队列并且在对某些情况进行排错时遇到了麻烦，我建议你使用<uri 
link="http://qmhandle.sourceforge.net/">qmHandle</uri>。它是一个允许你查看并且管理
qmail消息队列的perl小程序。同样，你需要做的仅仅是<c>emerge net-mail/qmhandle</c>。
</p>

</body>
</section>
<section>
<title>horde附加软件</title>
<body>

<p>
我想强烈推荐其他的一些Horde相关应用程序。<uri link="http://www.horde.org/turba/">Turba</uri>, <uri 
link="http://www.horde.org/kronolith/">Kronolith</uri>和<uri 
link="http://www.horde.org/nag/">Nag</uri> 可以在短时间内让IMP工作得更好。
它们的配置过程与IMP比较类似，因此在这项工作上你应该不会遇到什么大碍。记得编辑
Hoede配置目录下的registry.php以便使这些新程序可以在horde管理页面的底部显现。
</p>

</body>
</section>
<section>
<title>ucspi-tcp</title>
<body>

<p>
qmail在处理引入到服务器的连接时会用到ucspi-tcp。如果你想自定义这些过滤规则，请参看<path>/etc/tcprules.d/</path>
下面的配置文件。在这里你可以找到与每个服务相对应的两个相关文件，一个是配置文件（如tcp.qmail-smtp）
另一个是ucspi-tcp使用的这个配置文件编译后的文件（如tcp.qmail-smtp.cdb）。当你对这两个文件
进行更新后，你需要重建这些文件的二进制版本。要完成这项工作，只需要运行
<c>tcprules tcp.qmail-smtp.cdb tcp.qmail-smtp.tmp &lt; tcp.qmail-smtp</c>即可。
每当qmail接收到一个连接，其编译过的规则文件都会被重新读取一次，因此你不需要重新启动服务。
</p>

</body>
</section>
<section>
<title>qmail-scanner</title>
<body>

<p>
如果你想在你的服务器上实现内容过滤（垃圾邮件或者病毒扫描），那么你需要一个与默认不同的
队列处理程序。<uri 
link="http://qmail-scanner.sourceforge.net/">qmail-scanner</uri>可以比较好的完成这一工作，
你需要做的只是<c>emerge net-mail/qmail-scanner</c>，然后编辑<path>/etc/tcprules.d/tcp.qmail-smtp</path>
文件。
</p>

<impo>
qmail-scanner的build过程并不是令人愉快的，因为在emerge qmail-scanner之前你的系统中必须已经安装了相应的软件包，
比如SpamAssassin 以及／或者 Clam AntiVirus。要获得更多信息请参阅以下的相关内容。
</impo>

<pre caption="更改queuer">
# <i>cd /etc/tcprules.d/</i>
# <i>nano tcp.qmail-smtp</i>
<comment>(将 QMAILQUEUE="/var/qmail/bin/qmail-scanner-queue" 加入到catchall过滤规则中)</comment>
# <i>tcprules tcp.qmail-smtp.cdb tcp.qmail-smtp.tmp &lt; tcp.qmail-smtp</i>
</pre>

<p>
如果你想对垃圾邮件过滤和病毒过滤进行设置，请参阅以下的内容。你可以修改
<path>/var/qmail/bin/qmail-scanner-queue.pl</path>来进行一些自定义设置。
</p>

</body>
</section>
<section>
<title>SpamAssassin</title>
<body>

<p>
<uri 
link="http://www.spamassassin.org/">SpamAssassin</uri>是最好的开源垃圾邮件过滤程序之一. 
 你只需运行<c>emerge 
dev-perl/Mail-SpamAssassin</c> 来进行安装.
这个软件有command line（命令行版本）和client/server（客户端／服务器端）版本。 如果你的服务器处理的邮件不多，那么command line（命令行版本）就可以满足你的需要了；
但是如果你的服务器需要处理大量的邮件，你则需要选择client/server（客户端／服务器端）版本。
</p>

<pre caption="SpamAssassin的快速设置">
# <i>nano /etc/mail/spamassassin/local.cf</i>
<comment>(以下的选项设置为原始最低需求:)</comment>
required_hits 6
skip_rbl_checks 1

# <i>rc-update add spamd default</i>
# <i>/etc/init.d/spamd start</i>
# <i>nano /var/qmail/bin/qmail-scanner-queue.pl</i>
<comment>(请确保$spamc_binary 已经设置到了'/usr/bin/spamc'上.)</comment>
<comment>(如果它被设置到 '' 上, 请参看下面的注意事项.)</comment>
</pre>

<impo>
如果在emerge qmail-scanner之前你的系统中没有安装SpamAssassin，那么现在你需要重新
emerge qmail-scanner。qmail-scanner的build过程并不令人愉快，而且在build的过程中
它只会将那些已经检测到的软件包加入到它的功能特性中去。
</impo>

<p>
现在，所有的邮件都会通过qmail-scanner进行传输，同时SpamAssassin会对这些邮件进行
扫描。
</p>

</body>
</section>
<section>
<title>Clam AntiVirus</title>
<body>

<p>
与SpamAssassin类似，<uri link="http://www.clamav.net/">Clam AntiVirus</uri>
也有两个版本，下面我将为你说明如何对client/server（客户端／服务器端）版本进行快速设置。
但首先，你需要<c>emerge net-mail/clamav</c>。
</p>

<pre caption="Clam AntiVirus的快速设置">
# <i>nano /etc/conf.d/clamd</i> 
<comment>(设置 START_CLAMD=yes)</comment>
# <i>nano /etc/clamav.conf</i>
<comment>(按你的需要对其进行修改和设置)</comment>
# <i>rc-update add clamd default</i>
# <i>/etc/init.d/clamd start</i>
# <i>nano /var/qmail/bin/qmail-scanner-queue.pl</i>
<comment>(请确保 $clamscan_binary 变量已经设置到了 '/usr/bin/clamscan' 上.)</comment>
<comment>(如果它被设置到 '' 上, 请参看下面的注意事项.)</comment>
# <i>nano /var/qmail/control/conf-common</i>
<comment>(如果 ClamAV 报告有memory problem（内存读取问题）请尝试将softlimit的值设高一点)</comment>
</pre>

<impo>
如果在emerge qmail-scanner之前你的系统中没有安装Clam AntiVirus，那么现在你需要重新
emerge qmail-scanner。qmail-scanner的build过程并不令人愉快，而且在build的过程中
它只会将那些已经检测到的软件包加入到它的功能特性中去。
</impo>

<p>
现在，所有的邮件都会通过qmail-scanner进行传输，同时 Clam AntiVirus 会对这些邮件进行
扫描。
</p>

</body>
</section>
</chapter>

<chapter>
<title>最后的提醒</title>
<section>
<body>

<p>
我没有什么最后的提醒，除非你在阅读本指南的时候遇到了了什么困难，如果你发现这个教程有什么
Bug，请通过<uri link="http://bugs.gentoo.org/">Gentoo's Bugtracking Website</uri>
来<mail link="vapier@gentoo.org">与我进行联系</mail>。如果你有任何好的技巧可以为本指南增色，
也请你务必给我来信。我很喜欢qmail，因此我想让这个指南更加丰富以便让大家更好的体验MTA。
</p>

</body>
</section>
</chapter>
</guide>
