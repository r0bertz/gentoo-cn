<?xml version='1.0' encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/xsl/guide.xsl" ?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/www/www.gentoo.org/raw_cvs/gentoo/xml/htdocs/doc/en/metadata.xml,v 1.4 2004/03/07 12:12:53 swift Exp $ -->

<guide link="/doc/zh_cn/disk-install.xml">
<title>从磁盘安装GENTOO</title>

<author title="Author">
  <mail link="">phong</mail>
</author>
<author title="Translator">
  <mail link="">Jinduck</mail>
</author>
<author title="Editor">
  <mail link="joanphan@gmail.com">Hans Joanphan</mail>
</author>

<abstract>
从磁盘安装GENTOO。
</abstract>

<license/>

<version>0.1</version>
<date>2004年7月22日</date>

<chapter>
<title>正文</title>
<body>

<p>
你想安装GENTOO但你又无法从安装光盘启动吗？可能你的CD－ROM是旧式的， 可能你的BIOS或者SCSI有问题，甚至你根本没有CD－ROM或者你的内存不够你用安装CD启动。利用启动管理装置是一个绕开BIOS有问题的简单方法，另外你也可以从你现有的LINUX环境下或用引导磁盘来安装。
</p>

<p>
在你开始之前，你需要有GENTOO－CD 或者你要用的tar-ball源码包。并且你要熟悉一般的安装方案。
</p>

<section>
<title>准备一张引导磁盘</title>
<body>

<p>
以前tomsrtbt是最好的可用磁盘， 但是因为它的内核已经太老而不再适用。所以现在最好的选择是用其他发行版的引导磁盘像Slackware。我们这里讨论的方案虽然是针对tomsrtbt来说的， 但程序上基本和其他引导磁盘的一样。
</p>

</body>
</section>
<section>
<title>磁盘引导</title>
<body>

<p>
引导磁盘会侦测到任何的SCSI，PCMCIA，和你需要的网络硬件。 它也会尝试通过DHCP帮你架设你自己的网络。当系统把我那“不正常”的网卡“救活”并且不需要我费任何神就让它正常工作的时候， 我几乎不敢相信要晕了过去（以前为了这网卡曾经在REDHAT下花了我很长时间）。如果你的网卡没有挂载正常的话， 你需要参考一般安装方案， 用<path>ifconfig</path>来手动挂载。
</p>

</body>
</section>
<section>
<title>建立分区</title>
<body>

<p>
你可以选择像一般安装那样建立分区， 可是tomsrtbt没有XFS和ReiserFS的支持， 所以如果你要建立XFS和ReiserFS分区的话， 需要下点功夫（请看以下注释）
</p>

<p>
当你要挂载分区的时候， 我主张你要很清楚的表明你的文件系统。我的分区是EXT3， 但当我挂载时自动让系统选择文件系统的时候， 他竟然是被当作EXT2挂载。
</p>

<pre>
# swapon /dev/hda2
# mkdir /mnt/gentoo
# mount -t ext3 /dev/hda3 /mnt/gentoo
# mkdir /mnt/gentoo/boot
# mount -t ext3 /dev/hda1 /mnt/gentoo/boot
</pre>

<p>
不要忘了建立SWAP分区， 当你要编译的时候， 你可能要用到它。我们把根分区挂载到<path>/mnt/gentoo</path>（当我们安装完成的时候，这个就是你的GENTOO安装的根目录了）。其他我们建立的分区除了SWAP外，我们必须要为他们在根目录下建立子目录并且将他们挂载上。在上面的例子里， 我们将BOOT分区挂在<path>/mnt/gentoo/boot</path>，所以当我们安装的时候，这个将成为<path>/boot</path>。如果你建立了另外一个分区专门给<path>/usr</path>的话， 它会被挂载在<path>/mnt/gentoo/usr</path>。
</p>

<p>
最简单创立XFS或者ReiserFS的方法就是再给它一个另外的硬盘， 把这这块硬盘分割成EXT2或EXT3，然后当你完成基本GENTOO安装运行时（你要确定你编译的内核支持XFS／ReiserFS），在你的主硬盘上建立XFS/ReiserFS分区并复制所有的文件过去。你要确定/dev里有多过一种名称的文件有建立字符连接。同时要编辑fstab并且重新设置grub使得它可以指向新的分区。等你系统都能运行并且正确后在删除你原来的分区。
</p>

</body>
</section>
<section>
<title>解压缩TARBALL</title>
<body>

<p>
现在你可以挂载你的CDROM并且复制你要用的TARBALL到你所建立的分区了。因为tomsrtbt把基本工具的版本降低，所以程序上会有不同。将<path>stage1-ix86-1.4_rc2.tbz2</path>换成你要的TARBALL（比如以下的例子是release 1.4_rc的stage1的安装）。你也可以用wget下载你要的TARBALL而不必用光盘里的。同样需要注意的是cp命令后的TARBALL文件后缀在tomsrtbt里是bzip2. 如果你是用引导磁盘而不是tomsrtbt的话，那么它可能有更完善的bzip2和tar的版本，所以解压缩的步骤和一般安装的是一样的。
</p>

<pre>
# cd /mnt/gentoo
# cp /mnt/cdrom/stage1-ix86-1.4_rc2.tbz2 /mnt/gentoo/stage1-ix86-1.4_rc2.tar.bz2
# bzip2 -d stage1-*.tar.bz2
# tar xvf stage1-*.tar
# chown -R root.root /mnt/gentoo
</pre>

<p>
如果你是想下载tarball而不是从CD里取得的话，可以将<c>cp</c>的命令换成下面的（选择你想要的镜像）：
</p>

<pre>
# wget http://www.ibiblio.org/pub/Linux/di...86-1.4_rc2.tbz2
# mv stage1-ix86-1.4_rc2.tbz2 stage1-ix86-1.4_rc2.tar.bz2
</pre>

<p>
tomsrtbt会默认恢复解压缩文件原来的权限，从而会打乱user, group的拥有权， 你可以用chown来修改。
</p>

<p>
现在你可以删除你的tarball如果你想要节省空间的话。（也可以等全部安装完毕后在删除）。
</p>

</body>
</section>
<section>
<title>Chrooting</title>
<body>

<p>
这一章会和CD安装的程序有一点不同（<path>/proc</path>挂载会不一样）。系统会给出错误说这里没有make.profile, 但这是正常的， 在之后的<c>emerge rysnc</c>里会被改正。
</p>

<pre>
# mount -t proc /proc /mnt/gentoo/proc
# cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf
# chroot /mnt/gentoo /bin/bash
# /usr/sbin/env-update
Regenerating /etc/ld.so.cache...
# source /etc/profile
#
</pre>

</body>
</section>
<section>
<title>结束安装</title>
<body>

<p>
现在你可以按照一般安装的办法从第九章开始安装了。当你要重新启动的时候记得拿出你的引导磁盘。
</p>

</body>
</section>
</body>
</chapter>
<chapter>
<title>译者注</title>
<section>
<title>原始出处</title>
<body>

<p>
原始文章出处：<uri>http://forums.gentoo.org/viewtopic.php?t=8690</uri>
</p>

</body>
</section>
</chapter>
</guide>
